# Yandex test api

## Описание
Приложение представляет собой REST API сервис, сохраняющий переданные ему наборы данных 
(выгрузки от поставщика) c жителями.
Позволяет их просматривать, редактировать информацию об отдельных жителях, 
а также производить анализ возрастов жителей по городам и 
анализировать спрос на подарки в разных месяцах для указанного набора данных.
Реализована возможность загрузить несколько независимых наборов
данных с разными идентификаторами, изменяемых
и анализируемых независимо друг от друга.

### Установка зависимостей
* `pip3 install -r requirements.txt`

### Запуск сервера
* `set FLASK_APP=api.wsgi` on Windows
* `export FLASK_APP=api.wsgi` on Linux and Mac
* `flask run`
* `flask run --host=0.0.0.0 --port=8080`

### Развертывание на виртуальной машине
Для развертывания выбран терминальный менеджер tmux. Чтобы развернуть приложение, нужно создать сессию 
`tmux new-session -s api` и в открывшемся окне ввести команды для запуска сервера.
Чтобы выйти из окна сессии, необходимо ввести Ctrl-B D.
Приложение будет работать в фоновом режиме и не выключится после отключения ssh.
Чтобы отключить приложение, нужно войти в сессию `tmux attach -t api`, остановить приложение flask (Ctrl-C) и выйти из окна сессии.

### Запуск тестов
* `python3 -m pytest`
* `python3 -m pytest --cov api/`
* `coverage report -m`

### Запуск линтера
* `flake8 api/`
* `flake8 test/`
